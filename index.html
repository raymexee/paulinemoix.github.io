<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>pour paupau l'asticot</title>
    <link rel="stylesheet" href="style_girly.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="citepauline.js" defer></script>
</head>
<body>
    <header>
        <h1>Pour Pauline, cette fois rÃ©glÃ© parce que jme fais chier un mercredi d'aoÃ»t. 
        </h1>
    </header>

    <main id="app">
        <h1 id="quote">Bienvenue !</h1>
        <p id="date"></p>
        <div id="waiting-message">
            <p>Les messages commenceront le <strong>1er janvier 2025</strong>. Ã‡a arrive vite !</p>
            <p class="subtext">En attendant, tu peux toujours m'Ã©crire ğŸ«¶ğŸ»</p>
        </div>

        <!-- Button to save favorite quote -->
        <button id="save-quote-button">Ajouter aux favoris</button>

        <!-- Button to view favorites -->
        <button id="view-favorites-button" onclick="location.href='favorites.html'">Voir les favoris</button>

        <!-- Button to view archive -->
        <button id="archive-button" onclick="location.href='archive.html'">Voir l'archive</button>
    </main>

    <footer>
        <p>Cadeau de NoÃ«l 2024</p>
        <!-- Dark mode toggle button -->
        <button id="dark-mode-toggle">Activer le mode sombre</button>
    </footer>

    <script>
        const quotes = [
            "C'est la rentrÃ©e aujourd'hui, et je sais que pour toi c'est compliquÃ©. Je te soutiens tous les jours et j'espÃ¨re que tout va bien aller. J'ai rÃ©glÃ© le site d'ailleurs hihi, jme suis permis de rÃ©Ã©crire les derniers mois comme beaucoup a changÃ©. On va voir combien de temps tu vas prendre pour t'en rendre compte.",
            "C'est ta soirÃ©e des 18 ans et j'ai trop hÃ¢te ! J'espÃ¨re que je pourrais au moins passer un tout petit peu de ma soirÃ©e avec toi et que je pourrais Ãªtre Ã  tes cÃ´tes !",
            "Oulala le retour de soirÃ©e il pique, au moins ou j'Ã©cris je sais pas comment Ã§a va se finir mais terriblement pour certains d'entre nous je pense",
            "Ne laisse pas cette 2Ã¨me semaine de cours dÃ©jÃ  te dÃ©primer mv ! Reste forte, t'es super ",
            "Qui dit lundi dit JOIE DE VIVRE BIEN SUR. Ah et dis coucou a damien (bon tu liras Ã§a dans 3 mois peut etre donc c foutu",
            "THIS IS WHY WE CLASH. le truc cool avec le fait que tu liras pas c'est que je peux mettre des refs perso. ",
            "Sache que tu pourras toujours compter sur moi, je vais toujours Ãªtre ton premier dÃ©fenseur et ami <3",
            "TIRAGE DE LDC CE SOIR INSHALLAH PSG BARCA MON REVE DAMOUR",
            "Sortie d'entreprise mais aussi fin de semaine pour certains qui bossent deja HEHEHEHEH tu bosses cheh",
            "eh mv, tu me manques.",
            "AUJOURDHUI RAYO VALLECANO VS BARCA, je prÃ©dis un petit 3-1, but de raphicocojojo",
            "N'oublie jamais que comme l'homme a besoin d'oxygÃ¨ne pour vivre, il a besoin d'art et de poÃ©sie. Ouvre toi Ã  l'art aujourdhui, pense Ã  autre chose que les cours ğŸ«¶ğŸ»",
            "Au moins une personne aujourdhui a souri grÃ¢ce Ã  toi, et si y'a personne d'autre, cette personne Ã§a sera moi",
            "Hmm, je me demande quelle surprise je vais prÃ©parer pour dÃ©cembre...",
            "Oublie pas aujourd'hui de dire Ã  quelqu'un que tu les aime, c'est important",
            "T'inquiÃ¨te pas de ne pas rÃ©ussir, les seuls qui n'Ã©chouent pas c'est ceux qui font rien",
            "Je suis toujours fier de toi, surtout quand t'as survÃ©cu une semaine de plus dans ce CollÃ¨ge de mort.",
            "Vous jouez contre Lille aujourd'hui, attention Ã  pas perdre contre LES BETES ;)",
            "Je t'invite Ã  regarder good will hunting aujourdhui, c'est important ;)",
            "Oublie pas de rÃ©soudre une Ã©quation en plus aujourdhui ;)",
            "Oublie pas que les gens apprÃ©cient ta prÃ©sence, J'ESPERE QUE T'AS FAIT LEQUATION DE HIER",
            "J'ai hÃ¢te qu'on se revoie, mÃªme si j'Ã©cris ce message dans le passÃ© hehehhehhe",
            "Carpe Diem, profite de ta journÃ©e et tes amis/ies",
            "Je pense fort Ã  toi en fin de semaine, c'est la derniÃ¨re ligne droite, courage mv !",
            "Si tu te sens nulle, oublie pas que t'as une photo avec MALDINI",
            "Petit rappel de reregarder OU LIRE dead poets society ;)",
            "Je suis trÃ¨s heureux de t'avoir rencontrÃ©, et d'avoir l'occasion de te parler chaque jour",
            "Faites de chaque instant un souvenir prÃ©cieux.",
            "Faisons un petit rappel, VÃ©troz c'est pas le Valais, c'est les frouzes",
            "Le savais-tu, les kiwis (oiseaux) sont tellement mal faits par la nature que leurs oeuf fais la taille de leur corps, conclusion ils se dÃ©truisent le fiac",
            "Fin du mois !!!! Plus que 5 mois de cours ma biche j'espÃ¨re que t'as hÃ¢te",
            "1er fÃ©vrier ! Ethymologiquement, fÃ©vrier c'est le mois des purifications donc mange bien tes gÃ©lules d'homÃ©opathie hehe",
            "aujourdhui c'est non seulement dimanche, mais Ã§a fait aussi 2.2 c'est une journÃ©e miroir Ã§a porte chance ! J'espÃ¨re que tout se passe bien pour toi aujourdhui ;)",
            "Un lundi de plus, un lundi de plus que tu vas tenir comme une patronne, j'ai foi en toi mvv",
            "J'espÃ¨re que t'as pas d'exams aujourdhui mais bonne chance quand mÃªme ;)",
            "Aujourd'hui c'est le tournoi de volley ! J'ai trop hate de te voir et voir tous nos copains jouer et essayer de jouer avec eux hihihi",
            "Ã‡a fait 4 mois qu'on est copinous, eh oui dÃ©jÃ  que le temps passe vite. Deja un trimestre entier, Ã§a fait beaucoup... J'espere qupn sera amis pour encore super longtemps hihihi",
            "Rien a dire aujourdhui sauf que c'est l'anniversaire de mon papinou hehe Ã§a me permettra de voir si tu lis vraiment chaque jour oindue"
        ];

        function getQuoteOfTheDay(date) {
            const startOfYear = new Date(Date.UTC(date.getFullYear(), 0, 1));
            const currentUTCDate = new Date(Date.UTC(date.getFullYear(), date.getMonth(), date.getDate()));
            const dayOfYear = Math.floor((currentUTCDate - startOfYear) / (1000 * 60 * 60 * 24));
            return quotes[dayOfYear % quotes.length];
        }

        function getQuoteState(fixedDate = null) {
            const now = fixedDate || new Date();
            const startDate = new Date('2025-08-21T00:00:00');
            if (now >= startDate) {
                return {
                    showQuote: true,
                    dailyQuote: getQuoteOfTheDay(now),
                    displayDate: `Citation pour le ${now.toLocaleDateString()}`
                };
            } else {
                return { showQuote: false };
            }
        }

        function renderQuote({ showQuote, dailyQuote, displayDate }) {
            const quoteElement = document.getElementById("quote");
            const dateElement = document.getElementById("date");
            const waitingMessage = document.getElementById("waiting-message");

            if (showQuote) {
                quoteElement.style.display = "block";
                waitingMessage.style.display = "none";
                quoteElement.textContent = dailyQuote;
                dateElement.textContent = displayDate;
                dateElement.style.display = "block";
            } else {
                quoteElement.style.display = "none";
                waitingMessage.style.display = "block";
            }
        }

        function updateQuote(fixedDate = null) {
    const quoteState = getQuoteState(fixedDate);
    renderQuote(quoteState);

    // Fill archive with missing quotes
    const quotesArchive = JSON.parse(localStorage.getItem('quotesArchive')) || [];
    const archiveDates = quotesArchive.map(entry => entry.date);
    const today = new Date();
    const startDate = new Date('2025-01-01');

    for (let d = startDate; d <= today; d.setDate(d.getDate() + 1)) {
        const dateString = d.toLocaleDateString();
        if (!archiveDates.includes(dateString)) {
            const dailyQuote = getQuoteOfTheDay(new Date(d));
            quotesArchive.push({ date: dateString, message: dailyQuote });
        }
    }

    localStorage.setItem('quotesArchive', JSON.stringify(quotesArchive));

    // Save today's quote to the archive
    if (quoteState.showQuote) {
        const todayDate = today.toLocaleDateString();
        const janFirst2025 = new Date('2025-01-01');
        if (!archiveDates.includes(todayDate) && today >= janFirst2025) {
            quotesArchive.push({ date: todayDate, message: quoteState.dailyQuote });
            localStorage.setItem('quotesArchive', JSON.stringify(quotesArchive));
        }
    }
}

        function setMidnightTimer() {
            const now = new Date();
            const msUntilMidnight =
                new Date(now.getFullYear(), now.getMonth(), now.getDate() + 1, 0, 0, 0) - now;

            setTimeout(() => {
                updateQuote();
                setInterval(updateQuote, 24 * 60 * 60 * 1000);
            }, msUntilMidnight);
        }

        updateQuote();
        setMidnightTimer();
    </script>
</body>
</html>
